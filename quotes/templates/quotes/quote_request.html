{% extends "base.html" %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'quotes/css/quote_request.css' %}">
{% endblock %}

{% block content %}
<main class="special-bg">
  <section class="quote-request-section py-5">
    <div class="col text-center my-3">
      <h2 class="section-heading">Quote Request</h2>
    </div>

    <div class="container">   


      <!-- Bootstrap card-->
      <div class="card main-bg px-3">
        <div class="card-body">
          <p class="text-white">Please fill out the form below</p>
        <form action="" method="POST" id="payment-form" class="text-white">
          {% csrf_token %}

            {{ form | crispy }}

            <fieldset class="px-3">
              <legend class="fieldset-label small text-black px-2 w-auto">Payment</legend>
              <!-- A Stripe card element will go here -->
              <div class="mb-3" id="card-element"></div>
  
              <!-- Used to display form errors -->
              <div class="mb-3 text-danger" id="card-errors" role="alert"></div>
              <!-- Pass the client secret to the view to get the payment intent id -->
              <!-- <input type="hidden" value="{{ client_secret }}" name="client_secret"> -->
            </fieldset>



             <!-- Card order total box -->
            <div class="card total-box bg-info">
              <div class="card-body d-flex justify-content-between py-1 h4">
                <p class="my-1">Subtotal:</p>
                <p  id="subtotal" class="my-1">£0.00</p>
              </div>
              <div class="card-body d-flex justify-content-between py-1 h4">
                <p class="my-1">Discount:</p>
                <p id="discount" class="my-1">-£0.00</p>
              </div>
              <div class="card-body d-flex justify-content-between py-1 h4">
                <p class="my-1">Total:</p>
                <p id="total" class="my-1">£0.00</p>
              </div>
            </div><!-- end/ Card order total box -->

          <button type="submit" class="btn btn-success">Submit Request</button>

        </form>
        </div>

      </div><!-- end/ Bootstap card -->


     
      
      <!-- Discount info message -->
      <div class="text-end text-white">
        <p>You could save more!</p>
      </div>







    </div>


  </section>
 
  
</main>
{% endblock %}

{% block postloadjs %}
    {{ block.super }}
    {{ stripe_public_key|json_script:"id_stripe_public_key" }}
    {{ client_secret|json_script:"id_client_secret" }}
    <script src="{% static 'quotes/js/quote_request.js' %}"></script>
    <script src="{% static 'quotes/js/stripe_elements.js' %}"></script>
{% endblock %}